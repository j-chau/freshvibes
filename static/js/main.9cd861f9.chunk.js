(this.webpackJsonpproject5=this.webpackJsonpproject5||[]).push([[0],{27:function(e,t,a){e.exports=a(54)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),o=a.n(s),l=(a(32),a(2)),c=a(3),i=a(5),m=a(4),u=(a(33),a(34),a(11)),h=a.n(u);a(36);h.a.initializeApp({apiKey:"AIzaSyCcjQZCdsuQzcdA9Zk1-xvJ43qLM3Nl4ho",authDomain:"fresh-vibes.firebaseapp.com",databaseURL:"https://fresh-vibes.firebaseio.com",projectId:"fresh-vibes",storageBucket:"fresh-vibes.appspot.com",messagingSenderId:"772541813549",appId:"1:772541813549:web:ae9aa0c6ce4b542ffd39a4"});var d=h.a,p=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleClick=function(t){var a=JSON.parse(window.localStorage.getItem("heartsLog"));null===a&&(window.localStorage.setItem("heartsLog","{}"),a={}),a[t]||(e.setState((function(e){return{hearts:e.hearts+1,oldHeart:!0}}),(function(){d.database().ref(t+"/header").update({hearts:e.state.hearts})})),a[t]=!0,window.localStorage.setItem("heartsLog",JSON.stringify(a)))},e.state={hearts:0,oldHeart:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(window.localStorage.getItem("heartsLog"));null!==e&&e[this.props.id]&&this.setState({oldHeart:!0}),this.setState({hearts:this.props.count})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"heartContainer"},r.a.createElement("p",{className:"counterDisplay"},this.state.hearts),r.a.createElement("i",{className:"fas fa-heart"+(this.state.oldHeart?" oldHeart":""),onClick:function(){return e.handleClick(e.props.id)},tabIndex:0}))}}]),a}(n.Component),g=function(e){var t=e.header,a=e.description,n=e.songList,s=e.banner,o=e.id;return r.a.createElement("div",{className:"block postContainer"},r.a.createElement("div",{className:"postHeader"},r.a.createElement("h2",null,t.title),r.a.createElement(p,{id:o,count:t.hearts})),r.a.createElement("span",{className:"postInfo"},"by ",t.author," on ",t.publishInfo),r.a.createElement("div",{className:"bannerImg"},r.a.createElement("img",{src:s.imgUrl,alt:s.altText})),r.a.createElement("p",{className:"imgCredit"},"Photo by ",r.a.createElement("a",{href:"https://unsplash.com/@"+s.photographer+"?utm_source=fresh_vibes&utm_medium=referral",target:"_blank",rel:"noopener noreferrer"},s.photographer),"\xa0on ",r.a.createElement("a",{href:"https://unsplash.com/?utm_source=fresh_vibes&utm_medium=referral",target:"_blank",rel:"noopener noreferrer"},"Unsplash")),r.a.createElement("p",null,a),r.a.createElement("ul",null,n.map((function(e,t){var a="https://bandcamp.com/EmbeddedPlayer/album="+e.embedId+"/size=small/bgcol=f5f1ea/linkcol=0687f5/transparent=true/";return r.a.createElement("li",{className:"songInfo",key:t},r.a.createElement("iframe",{src:a,title:e.credit,seamless:!0},r.a.createElement("a",{href:e.embedLink},e.credit)))}))))},b=a(8),f=a(7),v=a(9),E=a(26),S=a.n(E),y=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState({searchTerm:t.target.value}),clearTimeout(e.timer),e.timer=setTimeout((function(){e.doSearch()}),1e3)},e.selectImg=function(t){var a=t.urls,n=t.alt_description,r=t.user;e.setState({selectImg:{imgUrl:a.regular,altText:n,photographer:r.username}})},e.state={searchTerm:"",searchArr:[],APIKey:"UTVmOX5KTgYoWwFFdjDBBDvIbovGexTDgITSGWjrC3c",selectImg:{imgUrl:"",altText:"",photographer:""}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",t=document.querySelector("body"),a=document.querySelector(".modalContainer"),n=t.querySelectorAll(e),r=a.querySelectorAll(e);n.forEach((function(e){return e.setAttribute("tabindex","-1")})),r.forEach((function(e){return e.removeAttribute("tabindex")})),document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.querySelector("body").querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").forEach((function(e){return e.setAttribute("tabindex","0")})),document.body.style.overflow="unset"}},{key:"doSearch",value:function(){var e=this;S()({url:"https://api.unsplash.com/search/photos/",method:"GET",dataResponse:"json",params:{client_id:this.state.APIKey,orientation:"landscape",per_page:12,query:this.state.searchTerm}}).then((function(t){e.setState({searchArr:Object(b.a)(t.data.results)})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modalContainer newBtn form"},r.a.createElement("label",{htmlFor:"searchText",className:"srOnly"},"Search image"),r.a.createElement("input",{type:"text",id:"searchText",value:this.state.searchTerm,name:"author",onChange:this.handleChange,placeholder:"Search for an image",required:!0}),r.a.createElement("div",{className:"unsplashImgs"},r.a.createElement("div",{className:"unsplashInner"},this.state.searchArr.map((function(t){return r.a.createElement("img",{key:t.id,src:t.urls.thumb,alt:t.alt_description,className:"imgThumbs",onClick:function(){return e.selectImg(t)}})})))),r.a.createElement("div",{className:"selectImg bannerImg"},r.a.createElement("img",{src:this.state.selectImg.imgUrl,alt:this.state.selectImg.altText})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.closeModal,className:"delBtn"},"close"),r.a.createElement("button",{className:"impBtn",onClick:function(t){return e.props.handleSelect(t,e.state.selectImg)}},"select")))}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).addSongs=function(){for(var t=[],a=0;a<e.state.numSongs;a++)t.push(r.a.createElement(n.Fragment,{key:a},r.a.createElement("label",{className:"srOnly",htmlFor:"inputEmbed"},"Song Embed Code"),r.a.createElement("input",{type:"text",id:"inputEmbed",value:e.state.songListCode[a],name:"songList",onChange:e.handleChange,placeholder:"Song Embed Code",required:!0})));return t},e.addImg=function(t,a){t.preventDefault(),e.setState({banner:Object(v.a)({},a),showImg:!1})},e.closeModal=function(){e.setState({showImg:!1})},e.handleChange=function(t){Object(v.a)({},e.state);var a=t.target,n=a.name,r=a.value;e.state.numSongs;"songList"===n&&e.setState({}),e.setState(Object(f.a)({},n,r))},e.handleAdd=function(t){if(t.preventDefault(),e.state.numSongs<3){var a=e.state.numSongs+1;e.setState({numSongs:a})}},e.handleSubmit=function(t){t.preventDefault();var a=!0,n=Object(b.a)(e.state.songListCode).map((function(e){if(void 0!==e&&e.length>0){var t=e.indexOf("album")+"album".length+1,n=e.indexOf("/",t),r=e.slice(t,n),s=e.indexOf("<a href")+"<a href".length+2,o=e.indexOf('">',s),l=e.slice(s,o),c=e.indexOf("</a>",o),i=e.slice(o+2,c);if(!(r<1||l<1||i<1))return console.log("song id check: pass"),{credit:i,embedId:r,embedLink:l};a=!1,console.log("song id check: failed")}})),r=Object.values(Object(v.a)({},e.state)).filter((function(e){var t=e;return void 0===e.length&&(t=Object.values(e)),t.length>0}));console.log(r),r.length<5&&(a=!1,console.log("length check: fail")),console.log("submit:"+a),a?(e.setState((function(e){return{numSongs:1,songList:n}})),e.props.handleSubmit(e.state)):e.setState({error:!0}),console.log(e.state.songList)},e.state={title:"",author:"",descript:"",songListCode:[],songList:[],banner:{imgUrl:""},numSongs:1,showImg:!1,error:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.author,s=t.descript,o=t.banner,l=!(this.state.numSongs<3);return r.a.createElement(r.a.Fragment,null,this.state.showImg&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modalBg"}),r.a.createElement(y,{handleSelect:this.addImg,closeModal:this.closeModal})),r.a.createElement("form",{className:"block newBtn form"},r.a.createElement("label",{className:"srOnly",htmlFor:"inputTitle"},"Post Title"),r.a.createElement("input",{type:"text",id:"postTitle",value:a,name:"title",onChange:this.handleChange,placeholder:"Post Title",required:!0}),r.a.createElement("label",{className:"srOnly",htmlFor:"inputAuthor"},"Your Name"),r.a.createElement("input",{type:"text",id:"inputAuthor",value:n,name:"author",onChange:this.handleChange,placeholder:"Author Name",required:!0}),r.a.createElement("div",{className:"bannerImg"+(o.imgUrl.length<1?" noImg":""),onClick:function(){return e.setState({showImg:!0})},tabIndex:0},o.imgUrl.length>1?r.a.createElement("img",{src:o.imgUrl,alt:o.altText}):r.a.createElement("p",null,"Click to select an image")),r.a.createElement("label",{className:"srOnly",htmlFor:"inputDescrip"},"Description"),r.a.createElement("textarea",{rows:"7",maxLength:"500",id:"inputDescrip",value:s,name:"descript",onChange:this.handleChange,placeholder:"add a description about your song or album selection. let others konw what kind of mood to expect.",required:!0}),this.addSongs(),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleAdd,className:"impBtn addSongBtn",disabled:l,"aria-disabled":l},"add new song")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.closeForm,className:"delBtn"},"delete"),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"impBtn"},"post"),r.a.createElement("p",{className:"errMsg"+(this.state.error?" show":"")},"all fields are required"))))}}]),a}(n.Component),w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).savePost=function(t){var a=t.title,n=t.author,r=t.descript,s=t.songList,o=t.banner,l=new Date,c={header:{author:n,title:a,publishInfo:"".concat(l.getFullYear(),"-").concat(("0"+(l.getMonth()+1)).slice(-2),"-").concat(("0"+l.getDate()).slice(-2)),hearts:0},description:r,songList:s,banner:o};console.log(s),console.log(c);d.database().ref();e.setState({showNew:!1})},e.state={posts:[],showNew:!1,touchscreen:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.database().ref().on("value",(function(t){var a=[],n=t.val();for(var r in n)a.unshift({key:r,content:n[r]});e.setState({posts:a})})),("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&this.setState({touchscreen:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"block"},"fresh vibes"),this.state.touchscreen?"":this.state.showNew?r.a.createElement(k,{closeForm:function(){return e.setState({showNew:!1})},handleSubmit:this.savePost}):r.a.createElement("button",{className:"block newBtn",onClick:function(){return e.setState({showNew:!0})}},"+ New"),this.state.posts.map((function(e){var t=e.content,a=t.header,n=t.description,s=t.songList,o=t.banner;return r.a.createElement(g,{key:e.key,id:e.key,header:a,description:n,songList:s,banner:o})})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.9cd861f9.chunk.js.map