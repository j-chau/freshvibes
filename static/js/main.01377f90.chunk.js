(this.webpackJsonpproject5=this.webpackJsonpproject5||[]).push([[0],{26:function(e,t,a){e.exports=a(53)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),l=a.n(s),o=(a(31),a(7)),c=a(2),i=a(3),m=a(5),u=a(4),h=(a(32),a(33),a(10)),d=a.n(h);a(35);d.a.initializeApp({apiKey:"AIzaSyCcjQZCdsuQzcdA9Zk1-xvJ43qLM3Nl4ho",authDomain:"fresh-vibes.firebaseapp.com",databaseURL:"https://fresh-vibes.firebaseio.com",projectId:"fresh-vibes",storageBucket:"fresh-vibes.appspot.com",messagingSenderId:"772541813549",appId:"1:772541813549:web:ae9aa0c6ce4b542ffd39a4"});var p=d.a,g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleClick=function(t){var a=JSON.parse(window.localStorage.getItem("heartsLog"));null===a&&(window.localStorage.setItem("heartsLog","{}"),a={}),a[t]||(e.setState((function(e){return{hearts:e.hearts+1,oldHeart:!0}}),(function(){p.database().ref(t+"/header").update({hearts:e.state.hearts})})),a[t]=!0,window.localStorage.setItem("heartsLog",JSON.stringify(a)))},e.state={hearts:0,oldHeart:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(window.localStorage.getItem("heartsLog"));null!==e&&e[this.props.id]&&this.setState({oldHeart:!0}),this.setState({hearts:this.props.count})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"heartContainer"},r.a.createElement("p",{className:"counterDisplay"},this.state.hearts),r.a.createElement("i",{className:"fas fa-heart"+(this.state.oldHeart?" oldHeart":""),onClick:function(){return e.handleClick(e.props.id)},tabIndex:0}))}}]),a}(n.Component),f=function(e){var t=e.header,a=e.description,n=e.songList,s=e.banner,l=e.id;return r.a.createElement("div",{className:"block postContainer"},r.a.createElement("div",{className:"postHeader"},r.a.createElement("h2",null,t.title),r.a.createElement(g,{id:l,count:t.hearts})),r.a.createElement("span",{className:"postInfo"},"by ",t.author," on ",t.publishInfo),r.a.createElement("div",{className:"bannerImg"},r.a.createElement("img",{src:s.imgUrl,alt:s.altText})),r.a.createElement("p",{className:"imgCredit"},"Photo by ",r.a.createElement("a",{href:"https://unsplash.com/@"+s.photographer+"?utm_source=fresh_vibes&utm_medium=referral",target:"_blank",rel:"noopener noreferrer"},s.photographer),"\xa0on ",r.a.createElement("a",{href:"https://unsplash.com/?utm_source=fresh_vibes&utm_medium=referral",target:"_blank",rel:"noopener noreferrer"},"Unsplash")),r.a.createElement("p",null,a),r.a.createElement("ul",null,n.map((function(e,t){var a="https://bandcamp.com/EmbeddedPlayer/album="+e.embedId+"/size=small/bgcol=f5f1ea/linkcol=0687f5/transparent=true/";return r.a.createElement("li",{className:"songInfo",key:t},r.a.createElement("iframe",{src:a,title:e.credit,seamless:!0},r.a.createElement("a",{href:e.embedLink},e.credit)))}))))},b=a(8),v=a(25),E=a.n(v),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState({searchTerm:t.target.value}),clearTimeout(e.timer),e.timer=setTimeout((function(){e.doSearch()}),1500)},e.selectImg=function(t){var a=t.urls,n=t.alt_description,r=t.user;e.setState({selectImg:{imgUrl:a.regular,altText:n,photographer:r.username}})},e.state={searchTerm:"",searchArr:[],APIKey:"UTVmOX5KTgYoWwFFdjDBBDvIbovGexTDgITSGWjrC3c",selectImg:{imgUrl:"",altText:"",photographer:""}},e}return Object(i.a)(a,[{key:"doSearch",value:function(){var e=this;E()({url:"https://api.unsplash.com/search/photos/",method:"GET",dataResponse:"json",params:{client_id:this.state.APIKey,orientation:"landscape",per_page:12,query:this.state.searchTerm}}).then((function(t){e.setState({searchArr:Object(o.a)(t.data.results)})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modalContainer newBtn"},r.a.createElement("form",{className:"modalForm"},r.a.createElement("label",{htmlFor:"searchText",className:"srOnly"},"Search image"),r.a.createElement("input",{type:"text",id:"searchText",value:this.state.searchTerm,name:"author",onChange:this.handleChange,placeholder:"Search for an image",required:!0}),r.a.createElement("div",{className:"unsplashImgs"},r.a.createElement("div",{className:"unsplashInner"},this.state.searchArr.map((function(t){return r.a.createElement("img",{key:t.id,src:t.urls.thumb,alt:t.alt_description,className:"imgThumbs",onClick:function(){return e.selectImg(t)}})})))),r.a.createElement("div",{className:"selectImg bannerImg"},r.a.createElement("img",{src:this.state.selectImg.imgUrl,alt:this.state.selectImg.altText})),r.a.createElement("button",{className:"impBtn",onClick:function(t){return e.props.handleSelect(t,e.state.selectImg)}},"select")))}}]),a}(n.Component),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).addSongs=function(){for(var t=[],a=0;a<e.state.numSongs;a++)t.push(r.a.createElement(n.Fragment,{key:a},r.a.createElement("label",{className:"srOnly",htmlFor:"inputEmbed"},"Song Embed Code"),r.a.createElement("input",{type:"text",id:"inputEmbed",value:e.state.userInput.songList[a],name:"songList",onChange:e.handleChange,placeholder:"Song Embed Code",required:!0})));return t},e.addImg=function(t,a){t.preventDefault();var n=Object(b.a)({},e.state.userInput);n.banner=Object(b.a)({},a),e.setState({userInput:n,showImg:!1})},e.handleChange=function(t){var a=Object(b.a)({},e.state.userInput),n=t.target,r=n.name,s=n.value;"songList"===r?a.songList[e.state.numSongs-1]=s:a[r]=s,e.setState({userInput:a})},e.handleAdd=function(t){if(t.preventDefault(),e.state.numSongs<3){var a=e.state.numSongs+1;e.setState({numSongs:a})}else console.log("false")},e.state={numSongs:1,showImg:!1,userInput:{title:"",author:"",descript:"",songList:[],banner:{}}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.userInput,a=t.title,n=t.author,s=t.descript,l=t.banner;return r.a.createElement(r.a.Fragment,null,this.state.showImg&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modalBg"}),r.a.createElement(I,{handleSelect:this.addImg})),r.a.createElement("form",{className:"block newBtn"},r.a.createElement("label",{className:"srOnly",htmlFor:"inputTitle"},"Post Title"),r.a.createElement("input",{type:"text",id:"postTitle",value:a,name:"title",onChange:this.handleChange,placeholder:"Post Title",required:!0}),r.a.createElement("label",{className:"srOnly",htmlFor:"inputAuthor"},"Your Name"),r.a.createElement("input",{type:"text",id:"inputAuthor",value:n,name:"author",onChange:this.handleChange,placeholder:"Author Name",required:!0}),r.a.createElement("div",{className:"bannerImg noImg",onClick:function(){return e.setState({showImg:!0})},tabIndex:0},Object.keys(l).length>0?r.a.createElement("img",{src:l.imgUrl,alt:l.altText}):r.a.createElement("p",null,"Click to select an image")),r.a.createElement("label",{className:"srOnly",htmlFor:"inputDescrip"},"Description"),r.a.createElement("textarea",{rows:"7",maxLength:"500",id:"inputDescrip",value:s,name:"descript",onChange:this.handleChange,placeholder:"add a description about your song or album selection. let others konw what kind of mood to expect.",required:!0}),this.addSongs(),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{onClick:this.handleAdd,className:"impBtn"},"add new song")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.closeForm,className:"delBtn"},"delete"),r.a.createElement("button",{onClick:function(){e.setState({numSongs:1}),e.props.handleSubmit(e.state.userInput)},className:"impBtn"},"post"))))}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).savePost=function(t){for(var a=t.title,n=t.author,r=t.descript,s=t.songList,l=t.banner,c=new Date,i={header:{author:n,title:a,publishInfo:"".concat(c.getFullYear(),"-").concat(("0"+(c.getMonth()+1)).slice(-2),"-").concat(("0"+c.getDate()).slice(-2)),hearts:0},description:r,songList:[],banner:l},m=Object(o.a)(s),u=0;u<m.length;u++){var h=m[u],d=h.indexOf("album")+"album".length+1,g=h.indexOf("/",d),f=h.slice(d,g),b=h.indexOf("<a href")+"<a href".length+2,v=h.indexOf('">',b),E=h.slice(b,v),I=h.indexOf("</a>",v),S=h.slice(v+2,I);i.songList.push({credit:S,embedId:f,embedLink:E})}p.database().ref().push(i),e.setState({showNew:!1})},e.state={posts:[],showNew:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.database().ref().on("value",(function(t){var a=[],n=t.val();for(var r in n)a.unshift({key:r,content:n[r]});e.setState({posts:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"block"},"fresh vibes"),this.state.showNew?r.a.createElement(S,{closeForm:function(){return e.setState({showNew:!1})},handleSubmit:this.savePost}):r.a.createElement("button",{className:"block newBtn",onClick:function(){return e.setState({showNew:!0})}},"+ New"),this.state.posts.map((function(e){var t=e.content,a=t.header,n=t.description,s=t.songList,l=t.banner;return r.a.createElement(f,{key:e.key,id:e.key,header:a,description:n,songList:s,banner:l})})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.01377f90.chunk.js.map